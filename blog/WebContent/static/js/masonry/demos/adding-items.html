<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  
  <title>Adding items &middot; jQuery Masonry</title>
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  
  <link rel="stylesheet" href="../css/style.css" />
  
  
    <script src="../js/modernizr-transitions.js"></script>
  
  <!-- scripts at bottom of page -->

</head>
<body class="demos ">
  

<div id="container" class="transitions-enabled clearfix">

  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/1.jpg"></p>
  </div>
  
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/2.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/3.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/4.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/5.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/6.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/7.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/8.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/9.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/10.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/11.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/12.jpg"></p>
  </div>
<div class="box photo col3">
  	<p><img src="/FastJavaProject/image/1.jpg"></p>
  </div>
  
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/2.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/3.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/4.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/5.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/6.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/7.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/8.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/9.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/10.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/11.jpg"></p>
  </div>
  <div class="box photo col3">
  	<p><img src="/FastJavaProject/image/12.jpg"></p>
  </div>


</div> <!-- #container -->

<script src="../js/jquery-1.7.1.min.js"></script>
<script src="../jquery.masonry.min.js"></script>
<script src="../js/box-maker.js"></script>
<script>
$(function(){
    
    var $container = $('#container');
    
    $container.masonry({
      itemSelector: '.box',
      columnWidth: 100
    });
    /*
    $('#prepend').click(function(){
      var $boxes = $( boxMaker.makeBoxes() );
      $container.prepend( $boxes ).masonry( 'reload' );
    });
    
    $('#append').click(function(){
      var $boxes = $( boxMaker.makeBoxes() );
      $container.append( $boxes ).masonry( 'appended', $boxes );
    });
    */
    var flag = false;
 	var nScrollHight = 0; //滚动距离总长(注意不是滚动条的长度)
     var nScrollTop = 0;   //滚动到的当前位置
     var nDivHight = $(window).height();
     $(window).scroll(function(){
     if(nScrollTop + nDivHight < nScrollHight){
         flag = false;
  	 }
        nScrollHight = document.body.scrollHeight;
        nScrollTop = $(window).scrollTop();
        if(nScrollTop + nDivHight + 1 >= nScrollHight){
        	
        if(!flag){
        	flag = true;
               $.ajax({
                url : 'test.jsp',
                success : function(data){
                	$container.append(data).masonry('reload');
                }
               });
        }
       }
     });
  }); 
</script>
    

</body>
</html>